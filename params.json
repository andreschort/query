{"name":"QueryTables","tagline":"A small library that enables the fast creation of GridViews with filter and multiple sorting features with Entity Framework support.","body":"QueryTables\r\n=====\r\n\r\nQueryTables can:\r\n- Transform an IQueryable<T> with projections into another type(or an anonymous type), apply filters and multiple sortings. The IQueryable can be anything, from a list in memory to an Entity Framework query.\r\n- Easily create a GridView which gets the data from an IQueryable using the transformations provided.\r\n\r\nYou can find an example application in https://github.com/andreschort/query-sample\r\n\r\nDemo\r\n----\r\n![demo](https://raw.github.com/andreschort/query/master/query-sample.gif)\r\n\r\nTODO\r\n----\r\n\r\nQueryTables.Core\r\n- Support for compiled queries\r\n - Filter values and sortings as parameters.\r\n - Research: http://msdn.microsoft.com/en-us/library/bb896297.aspx\r\n- Support for usage stadistics (ie. how often a combination of filters and sortings is used).\r\n- Support for arbitrary filter expressions ie. \">10 AND !=15\".\r\n- Extend operators to any target type.\r\n\r\nQueryTables.Web\r\n- TD Tooltip\r\n- TH y TD CssClass\r\n- Improve the way you can apply styles to the Query.Web controls.\r\n- New field types:\r\n - Autocomplete (from a service or automatically from the Query - if posible)\r\n - DropDownList with multiple options (Query.Core currently supports many filter values with an OR conjunction)\r\n- Calendar button option for DateField.\r\n- Support TemplateField:\r\n - Sorting of columns that do not have filter.\r\n - Create the header with filter web controls\r\n   - Requires a refactor in the ui fields to extract web controls for each filter type)\r\n    - How would GridExtender set global properties and get sort and filter values?\r\n\r\nBasic projection\r\n----------------\r\nLet's say you have this Employee class:  \r\n```csharp\r\npublic class Employee  \r\n{  \r\n  public string Name { get; set; }  \r\n  public string LastName { get; set; }  \r\n}\r\n```\r\n\r\nYou create a Query object like this:\r\n```csharp\r\nvar query = new Query<Employee>();\r\nquery.AddField(\"FullName\").Select(x => x.Name + \" \" + x.LastName); // FieldName = \"FullName\"\r\n\r\nvar employees = //some IQueryable<Employee>\r\nIQueryable<EmployeeDTO> theResult = query.Project<EmployeeDTO>(employees);\r\n```\r\nWhere EmployeeDTO is something like this:\r\n```chsarp\r\npublic class EmployeeDTO\r\n{\r\n  public string FullName;\r\n}\r\n```\r\n\r\nIf you do not want to define an EmployeeDTO class you can use an annonymous type like this:\r\n```csharp\r\nIQueryable theResult = query.Project(employees);\r\n```\r\ntheResult is an untyped IQueryable. The ElementType is an annonymous type of the form:\r\n```chsarp\r\npublic class FullName;String;\r\n{\r\n  public string FullName;\r\n}\r\n```\r\n\r\nBasic filtering\r\n---------------\r\nIf you want to filter the IQueryable<Employee> by some user-entered value.\r\n\r\nThe filters values are defined using a Dictionary<string, string>. The key is the name of the field and the value is the filter value. You can use a set of operators to filter.\r\n```csharp\r\nIQueryable<Employee> employees = ...\r\nvar filters = new Dictionary<string, string> {{\"FullName\", \"Car%\"}};   // '%' acts as the wildcard\r\nemployees = query.Filter(employees, filters);\r\n```\r\nThis is equivalent to:\r\n```csharp\r\n// by default it is case insensitive but you can override this\r\nemployees = employees.Where(x => x.LastName.ToLower().StartsWith(\"car\"));\r\n```\r\n\r\nBasic sorting\r\n-------------\r\nYou can also apply sorting to an IQueryable pretty much the same way that you apply filters:\r\n```csharp\r\nvar sortings = new List<KeyValuePair<string, SortDirection>>{\r\n  new KeyValuePair<string, SortDirection>(\"FullName\", SortDirection.Descending)\r\n}\r\nemployees = query.OrderBy(employees, sortings);\r\n```\r\nThis is equivalent to:\r\n```csharp\r\nemployees = employees.OrderByDescending(x => x.Name + \" \" + x.LastName);\r\n```\r\nMultiple sortings are supported.\r\n\r\nAdvance filtering\r\n-----------------\r\nYou can use a small set of operators to filter. The kind of expressions you can use to filter depends on the type of the property that the filter is targeting. This can be overriden using the FilterAsX methods.\r\n\r\nFor System.String you can use the wildcard `%` at the start, end or both to create 'like' expressions. For example:\r\n- `%someText`: Will return the values that ends with \"someText\".\r\n- `someText%`: Will return the values that start with \"someText\".\r\n- `%someText%`: Will return the values that contains \"someText\".\r\n\r\nThe filter is by default case insensitive but you can override this while creating the Query object.\r\n\r\nFor numeric types (int, double, decimal, etc) you can use these operators:\r\n- `=2`: This will return the values equal to 2 (this is the default operator)\r\n- `>2`: Greater than..\r\n- `>=2`: Great or equal to..\r\n- `<2`: Smaller than..\r\n- `<=2`: Samll or equal than to..\r\n- `2|3`: Between.. (this is the pipe character `|`)\r\n\r\nWebForms controls\r\n=================\r\nQuery includes a set of `DataControlField` classes that enables a GridView with filtering fields right below each header. Multiple sorting is also supported.\r\nThe initial release of this project required jQuery but this requirement was removed. Now all the fields are customs AJAX client controls.\r\nYou need AJAX Control toolkit as it is used to show a datepicker in the date filters.\r\n\r\nThe main entry point to this project is the GridExtender control:\r\n```aspx\r\n<query:GridExtender ID=\"GridExtender\" runat=\"server\"\r\n                    GridViewId=\"GridView\"\r\n                    AutoFilterDelay=\"2000\"\r\n                    EnableFilters=\"True\"\r\n                    OnFilter=\"GridExtender_Filter\"\r\n                    OnSort=\"GridExtender_Sort\" />\r\n```\r\nThese are the more important properties:\r\n- __GridViewId__ (string - required): The ID of the GridView.\r\n- __Placeholder__ (string - optional): The placeholder to show in the filter UI elements.\r\n- __AutoFilterDelay__ (int - optional): The milliseconds to wait before automatically triggering the search after the user changes a filter. If not specified the user needs to trigger the filter using the enter key.\r\n- __EnableFilters__ (bool - optional - default=true): Determines wheather the filter elements are shown (default: True)\r\n- __OnFilter__ (event): Triggered when the user changes a filter or hits the enter key while the focus is in a filter.\r\n- __OnSort__ (event): Triggered when the user clicks on a header's title.\r\n\r\nThe `GridExtender` exposes all the current filters and sortings through two properties:\r\n- Filters (`Dictionary<string, string>`): The key is the field's name and the value is the filter value. The dictionary will hold as many fields as you define, empty filters will have an empty string as the value.\r\n- Sortings (`List<KeyValuePair<string, SortDirection>>`): The key is the field's name and the value is the sort direction of the field. Only the fields which are currently sorting will be on the list.\r\n\r\nThere are three kinds of `DataControlField`'s:\r\n- __TextField__: Renders a text field as the filter UI element.\r\n- __DateField__: Renders two text fields as the filter UI elements (we need two elements to filter by a range of dates). Both elements have AJAX Control Toolkit datepicker.\r\n- __DropDownField__: Renders a select as the filter UI element.\r\n- __DynamicField__: Enables to programmatically set the field type. Uses one of the above fields internally.\r\n\r\nAll fields have a anchor as title above them which when clicked triggers the `Sort` event in `GridExtender`.\r\nThe `Filter` event is triggered by hitting the enter key on a field's filter UI element or automatically by the AutoFilterDelay parameter.\r\n\r\nThese are the properties common to all fields:\r\n- __Name__ (string - required): The name of the field. Determines the value shown and is the name used to identify the field's filter value and sorting direction in the `GridExtender` Filter and Sorting properties as explained above.\r\n- __DataField__ (string - optional): The name of the property of the data bound element from where to get the value of the data cell. If not specified it will use the __Name__ property.\r\n- __AssociatedControlID__ (string - optional): Makes the data cell to render a <label for=\"..\"> tag.\r\n- __ItemCssClass__ (string - optional): Add a CSS class to the data cell.\r\n- __Placeholder__ (string - optional): The placeholder to show in the filter UI element.\r\n- __UrlFormat__ (string - optional): Turns the text in the cell into a link. The string is used as the url of the link.\r\n- __UrlFields__ (string, optional): A comma separated list of properties to use with UrlFormat. This allows to generate an url customized for each row.\r\n- __AutoFilterDelay__ (int - optional): Same as GridExtender but affects only this field.\r\n- __ItemEnabled__ (bool - optional - default=true): Set to false when you want to disable everything inside the data cell.\r\n- __ItemTemplate__ (ITemplate - optional): Enables you to define the full content of the data cells (similar to TemplateField.ItemTemplate).\r\n- __Format__ (string - optional): Used to format the value shown in the data cell. Can be any standard format strings.\r\n- __FormatDelegate__ (Func<object, string> - optional): Use this when you want full control over how the value show inside the data cell is formatted. Overrides __Format__.\r\n- __Click__ (Event - optional): Makes the data cell show a link with a postback event. Overrides __UrlFormat__.\r\n\r\nThe following are properties specific to DropDownField:\r\n- __Items__ (List<ListItem> - required): Describes the list of options to put in the select element. Do not include the empty option, it is inserted automatically.\r\n\r\nThis is an example of a GridView using the `DataControlField`'s provided:\r\n\r\n```aspx\r\n<asp:GridView ID=\"GridView\" runat=\"server\" AutoGenerateColumns=\"False\" ShowHeaderWhenEmpty=\"True\"\r\n              AllowPaging=\"True\" AllowSorting=\"False\" PageSize=\"8\">\r\n    <Columns>\r\n        <query:TextField Name=\"Nombre\" HeaderText=\"Nombre\"\r\n                         UrlFormat=\"https://www.google.com.ar/search?q={0} {1}\" UrlFields=\"Nombre, Apellido\" />\r\n        <query:TextField Name=\"Apellido\" HeaderText=\"Apellido\" />\r\n        <query:TextField Name=\"Dni\" HeaderText=\"Dni\" />\r\n        <query:DropDownField Name=\"EstadoCivil\" HeaderText=\"Estado civil\" />\r\n        <query:TextField Name=\"Edad\" HeaderText=\"Edad\" />\r\n        <query:TextField Name=\"Salario\" HeaderText=\"Salario\" />\r\n        <query:DateField Name=\"FechaNacimiento\" HeaderText=\"Fecha Nacimiento\" Format=\"d\" />\r\n        <query:TextField Name=\"AttachmentCount\" HeaderText=\"Number of attachments\" />\r\n    </Columns>\r\n</asp:GridView>\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}